p1 + geom_bar(aes(colour = Habitat), stat = "identity", position = "dodge")
p1 + geom_bar(aes(fill = Habitat), stat = "identity", position = "dodge")
facet_grid(. ~ Season)
p1 + geom_bar(aes(fill = Habitat), stat = "identity", position = "dodge") +
facet_grid(. ~ Season)
str(type.N2O)
View(set.factors)
set.factors.basic(type.N2O)
str(type.N2O)
type.N2O <- set.factors.basic(type.N2O)
str(type.N2O)
p1 <- ggplot(type.N2O, aes(Site, avg_N2OFlux))
p1 + geom_bar(aes(fill = Habitat), stat = "identity", position = "dodge") +
facet_grid(. ~ Season)
type.N2O %>%
group_by(Habitat) %>%
ggplot(aes(Site, avg_N2OFlux)) +
geom_bar(aes(fill = Habitat), stat = "identity", position = "dodge") +
facet_grid(. ~ Season)
type.N2O %>%
group_by(Habitat) %>%
ggplot(aes(Site, avg_N2OFlux, fill = Habitat)) +
stat_summary(fun.y = mean, geom = "bar", position = "dodge") +
stat_summary(aes(label = round(..y.., 2)), fun.y = mean, geom = "text", size = 3) +
facet_grid(Season ~ .)
type.N2O %>%
group_by(Habitat) %>%
ggplot(aes(Site, avg_N2OFlux, fill = Habitat)) +
stat_summary(fun.y = mean, geom = "bar", position = "dodge") +
stat_summary(aes(label = round(..y.., 2)), fun.y = mean, geom = "text", size = 3) +
facet_grid(. ~ Season)
setwd("E:/R Markdown")
library("plyr")
library("dplyr")
library("car")
library("ggplot2")
library("ggpmisc")
library("rpart")
library("rpart.plot")
source("functions.R")
inund <- read.csv("Inundation\\clean\\inundation-clean_all-sites_all-seasons.csv", header = T)
inund$Age <- as.numeric(inund$Age)
SOM <- read.csv("LOI\\clean\\LOI-by-type_all-seasons_all-sites.csv", header = T)
SOD <- read.csv("SOD\\clean\\SOD-by-type_all-seasons_all-sites.csv", header = T)
O2conc <- read.csv("O2-conc\\clean\\O2-conc-by-type_all-seasons_all-sites.csv", header = T)
nutflux <- read.csv("nutrient-flux\\clean\\nutrient-flux-by-type_all-seasons_all-sites.csv", header = T)
DNF <- read.csv("N2-flux\\clean\\N2-flux-by-type_all-seasons_all-sites.csv", header = T)
#Sequential merges to combine all relevant data frames into a master data frame
#Includes all cores and seasons (including Summer 2015) initially- easier to double-check
#sort = F maintains original ordering scheme
m1 <- merge(inund, SOM, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m2 <- merge(m1, SOD, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m3 <- merge(m2, O2conc, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m4 <- merge(m3, nutflux, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m5 <- merge(m4, DNF, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
#Ensuring that preferred order is preserved
#This will turn Summer 2015 values to NA for easy elimination
m5$Season <- factor(m5$Season, levels = c("Summer", "Fall", "Winter", "Spring"))
m5$Site <- factor(m5$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
m5$CoreName <- factor(m5$CoreName, levels = c("LO", "HO", "LM", "MM", "HM", "Ref"))
m5$Habitat <- factor(m5$Habitat, levels = c("oyster", "marsh", "Ref"))
#Should only get rid of Summer 2015 rows
master <- na.omit(m5)
#Use functions I wrote to add columns with Habitat & Season represented by #s
#Just in case rpart was tempted to do something weird with the characters
master <- season.numbers(master)
master <- habitat.numbers(master)
#Reorder the columns
master <- master[c("Season", "SeasonNumber", "Site", "Age", "CoreName", "Habitat", "HabitatNumber",  "avg_N2Flux", "Perc_Inun", "avg_PercentOM", "avg_SOD", "avg_O2conc", "avg_flux_NOx", "avg_flux_NH3")]
#Rename the columns so they're less bulky
master <- plyr::rename(master, c("avg_N2Flux" = "N2flux", "Perc_Inun" = "Inund", "avg_PercentOM" = "SOM", "avg_SOD" = "SOD", "avg_O2conc" = "O2conc", "avg_flux_NOx" = "NOxflux", "avg_flux_NH3" = "NH3flux"))
summer <- master[master$Season == "Summer", ]
fall <- master[master$Season == "Fall", ]
winter <- master[master$Season == "Winter", ]
spring <- master[master$Season == "Spring", ]
IMS <- master[master$Site == "IMS", ]
Carrot <- master[master$Site == "Carrot", ]
NOAA <- master[master$Site == "NOAA", ]
Army <- master[master$Site == "Army", ]
all <- rpart(N2flux ~ SeasonNumber + HabitatNumber + Age + Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = "anova", data = master)
summary(fit.all)
fit.all <- rpart(N2flux ~ SeasonNumber + HabitatNumber + Age + Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = "anova", data = master)
summary(fit.all)
fit.BCG <- rpart(N2flux ~ Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = "anova", data = master)
summary(fit.BCG)
pruned.BCG <- prune(fit.BCG, cp = 0.04)
plot(pruned.BCG, uniform = T)
text(pruned.BCG, use.n = T, all = T, cex = 0.8)
plot(fit.BCG, uniform = T)
text(fit.BCG, use.n = T, all = T, cex = 0.8)
plot(fit.all, uniform = T)
text(fit.all, use.n = T, all = T, cex = 0.8)
summer.tree <- rpart(N2flux ~ Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = "anova", data = summer)
plot(summer.tree, uniform = T)
text(summer.tree, use.n = T, all = T, cex = 0.8)
rsq.rpart(pruned.BCG)
setwd("E:/R Markdown")
library("plyr")
library("dplyr")
library("car")
library("ggplot2")
library("ggpmisc")
library("rpart")
library("rpart.plot")
source("functions.R")
inund <- read.csv("Inundation\\clean\\inundation-clean_all-sites_all-seasons.csv", header = T)
inund$Age <- as.numeric(inund$Age)
SOM <- read.csv("LOI\\clean\\LOI-by-type_all-seasons_all-sites.csv", header = T)
SOD <- read.csv("SOD\\clean\\SOD-by-type_all-seasons_all-sites.csv", header = T)
O2conc <- read.csv("O2-conc\\clean\\O2-conc-by-type_all-seasons_all-sites.csv", header = T)
nutflux <- read.csv("nutrient-flux\\clean\\nutrient-flux-by-type_all-seasons_all-sites.csv", header = T)
DNF <- read.csv("N2-flux\\clean\\N2-flux-by-type_all-seasons_all-sites.csv", header = T)
View(m2)
summer <- master[master$Season == "Summer", ]
#Sequential merges to combine all relevant data frames into a master data frame
#Includes all cores and seasons (including Summer 2015) initially- easier to double-check
#sort = F maintains original ordering scheme
m1 <- merge(inund, SOM, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m2 <- merge(m1, SOD, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m3 <- merge(m2, O2conc, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m4 <- merge(m3, nutflux, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m5 <- merge(m4, DNF, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
#Ensuring that preferred order is preserved
#This will turn Summer 2015 values to NA for easy elimination
m5$Season <- factor(m5$Season, levels = c("Summer", "Fall", "Winter", "Spring"))
m5$Site <- factor(m5$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
m5$CoreName <- factor(m5$CoreName, levels = c("LO", "HO", "LM", "MM", "HM", "Ref"))
m5$Habitat <- factor(m5$Habitat, levels = c("oyster", "marsh", "Ref"))
#Should only get rid of Summer 2015 rows
master <- na.omit(m5)
#Use functions I wrote to add columns with Habitat & Season represented by #s
#Just in case rpart was tempted to do something weird with the characters
master <- season.numbers(master)
master <- habitat.numbers(master)
#Reorder the columns
master <- master[c("Season", "SeasonNumber", "Site", "Age", "CoreName", "Habitat", "HabitatNumber",  "avg_N2Flux", "Perc_Inun", "avg_PercentOM", "avg_SOD", "avg_O2conc", "avg_flux_NOx", "avg_flux_NH3")]
#Rename the columns so they're less bulky
master <- plyr::rename(master, c("avg_N2Flux" = "N2flux", "Perc_Inun" = "Inund", "avg_PercentOM" = "SOM", "avg_SOD" = "SOD", "avg_O2conc" = "O2conc", "avg_flux_NOx" = "NOxflux", "avg_flux_NH3" = "NH3flux"))
summer <- master[master$Season == "Summer", ]
fall <- master[master$Season == "Fall", ]
winter <- master[master$Season == "Winter", ]
spring <- master[master$Season == "Spring", ]
IMS <- master[master$Site == "IMS", ]
Carrot <- master[master$Site == "Carrot", ]
NOAA <- master[master$Site == "NOAA", ]
Army <- master[master$Site == "Army", ]
#Sequential merges to combine all relevant data frames into a master data frame
#Includes all cores and seasons (including Summer 2015) initially- easier to double-check
#sort = F maintains original ordering scheme
m1 <- merge(inund, SOM, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m2 <- merge(m1, SOD, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m3 <- merge(m2, O2conc, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m4 <- merge(m3, nutflux, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m5 <- merge(m4, DNF, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
#Ensuring that preferred order is preserved
#This will turn Summer 2015 values to NA for easy elimination
m5$Season <- factor(m5$Season, levels = c("Summer", "Fall", "Winter", "Spring"))
m5$Site <- factor(m5$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
m5$CoreName <- factor(m5$CoreName, levels = c("LO", "HO", "LM", "MM", "HM", "Ref"))
m5$Habitat <- factor(m5$Habitat, levels = c("oyster", "marsh", "Ref"))
#Should only get rid of Summer 2015 rows
master <- na.omit(m5)
#Use functions I wrote to add columns with Habitat & Season represented by #s
#Just in case rpart was tempted to do something weird with the characters
master <- season.numbers(master)
master <- habitat.numbers(master)
#Reorder the columns
master <- master[c("Season", "SeasonNumber", "Site", "Age", "CoreName", "Habitat", "HabitatNumber",  "avg_N2Flux", "Perc_Inun", "avg_PercentOM", "avg_SOD", "avg_O2conc", "avg_flux_NOx", "avg_flux_NH3")]
#Rename the columns so they're less bulky
master <- plyr::rename(master, c("avg_N2Flux" = "N2flux", "Perc_Inun" = "Inund", "avg_PercentOM" = "SOM", "avg_SOD" = "SOD", "avg_O2conc" = "O2conc", "avg_flux_NOx" = "NOxflux", "avg_flux_NH3" = "NH3flux"))
summer <- master[master$Season == "Summer", ]
fall <- master[master$Season == "Fall", ]
winter <- master[master$Season == "Winter", ]
spring <- master[master$Season == "Spring", ]
IMS <- master[master$Site == "IMS", ]
Carrot <- master[master$Site == "Carrot", ]
NOAA <- master[master$Site == "NOAA", ]
Army <- master[master$Site == "Army", ]
View(summer)
summer.tree <- rpart(N2flux ~ Age + Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = "anova", data = summer)
prp(summer.tree)
plot(summer.tree, uniform = T)
text(summer.tree, use.n = T, all = T, cex = 0.8)
fall.tree <- rpart(N2flux ~ Age + Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = "anova", data = fall)
prp(fall.tree)
plot(fall.tree, uniform = T)
text(fal.tree, use.n = T, all = T)
text(fall.tree, use.n = T, all = T)
winter.tree <- rpart(N2flux ~ Age + Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = "anova", data = winter)
prp(winter.tree)
spring.tree <- rpart(N2flux ~ Age + Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = "anova", data = spring)
prp(spring.tree)
fit.BCG <- rpart(N2flux ~ Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = "anova", data = master)
plot(fit.BCG, uniform = T)
text(fit.BCG, use.n = T, all = T, cex = 0.8)
pruned.BCG <- prune(fit.BCG, cp = 0.04)
plot(pruned.BCG, uniform = T)
text(pruned.BCG, use.n = T, all = T, cex = 0.8)
summary(pruned.BCG)
prp(pruned.BCG)
plot(pruned.BCG, uniform = T)
text(pruned.BCG, use.n = T, all = T, cex = 0.8)
par(mfrow, c(1,2))
par(mfrow = c(1,2))
plot(pruned.BCG, uniform = T)
text(pruned.BCG, use.n = T, all = T, cex = 0.8)
par(mfrow = c(1,1))
plot(pruned.BCG, uniform = T)
text(pruned.BCG, use.n = T, all = T, cex = 0.8)
text(pruned.BCG, use.n = T, all = T, cex = 0.4)
text(pruned.BCG, use.n = T, all = T, cex = 1)
plot(pruned.BCG, uniform = T)
text(pruned.BCG, use.n = T, all = T, cex = 1)
plot(pruned.BCG, uniform = T)
text(pruned.BCG, use.n = T, all = T, cex = 0.9)
fit.all <- rpart(N2flux ~ SeasonNumber + HabitatNumber + Age + Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = "anova", data = master)
pruned.all <- prune(fit.all, cp = 0.04)
plot(pruned.all, uniform = T)
text(pruned.all, use.n = T, all = T, cex = 0.8)
summary(pruned.all)
setwd("E:/R Markdown")
library("plyr")
library("dplyr")
library("car")
library("ggplot2")
library("ggpmisc")
library("rpart")
library("rpart.plot")
source("functions.R")
inund <- read.csv("Inundation\\clean\\inundation-clean_all-sites_all-seasons.csv", header = T)
inund$Age <- as.numeric(inund$Age)
SOM <- read.csv("LOI\\clean\\LOI-by-type_all-seasons_all-sites.csv", header = T)
SOD <- read.csv("SOD\\clean\\SOD-by-type_all-seasons_all-sites.csv", header = T)
O2conc <- read.csv("O2-conc\\clean\\O2-conc-by-type_all-seasons_all-sites.csv", header = T)
nutflux <- read.csv("nutrient-flux\\clean\\nutrient-flux-by-type_all-seasons_all-sites.csv", header = T)
DNF <- read.csv("N2-flux\\clean\\N2-flux-by-type_all-seasons_all-sites.csv", header = T)
#Sequential merges to combine all relevant data frames into a master data frame
#Includes all cores and seasons (including Summer 2015) initially- easier to double-check
#sort = F maintains original ordering scheme
m1 <- merge(inund, SOM, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m2 <- merge(m1, SOD, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m3 <- merge(m2, O2conc, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m4 <- merge(m3, nutflux, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m5 <- merge(m4, DNF, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
#Ensuring that preferred order is preserved
#This will turn Summer 2015 values to NA for easy elimination
m5$Season <- factor(m5$Season, levels = c("Summer", "Fall", "Winter", "Spring"))
m5$Site <- factor(m5$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
m5$CoreName <- factor(m5$CoreName, levels = c("LO", "HO", "LM", "MM", "HM", "Ref"))
m5$Habitat <- factor(m5$Habitat, levels = c("oyster", "marsh", "Ref"))
#Should only get rid of Summer 2015 rows
master <- na.omit(m5)
#Use functions I wrote to add columns with Habitat & Season represented by #s
#Just in case rpart was tempted to do something weird with the characters
master <- season.numbers(master)
master <- habitat.numbers(master)
#Reorder the columns
master <- master[c("Season", "SeasonNumber", "Site", "Age", "CoreName", "Habitat", "HabitatNumber",  "avg_N2Flux", "Perc_Inun", "avg_PercentOM", "avg_SOD", "avg_O2conc", "avg_flux_NOx", "avg_flux_NH3")]
#Rename the columns so they're less bulky
master <- plyr::rename(master, c("avg_N2Flux" = "N2flux", "Perc_Inun" = "Inund", "avg_PercentOM" = "SOM", "avg_SOD" = "SOD", "avg_O2conc" = "O2conc", "avg_flux_NOx" = "NOxflux", "avg_flux_NH3" = "NH3flux"))
summer <- master[master$Season == "Summer", ]
fall <- master[master$Season == "Fall", ]
winter <- master[master$Season == "Winter", ]
spring <- master[master$Season == "Spring", ]
IMS <- master[master$Site == "IMS", ]
Carrot <- master[master$Site == "Carrot", ]
NOAA <- master[master$Site == "NOAA", ]
Army <- master[master$Site == "Army", ]
View(master)
m1 <- merge(inund, SOM, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m2 <- merge(m1, SOD, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m3 <- merge(m2, O2conc, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m4 <- merge(m3, nutflux, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m5 <- merge(m4, DNF, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m5$Season <- factor(m5$Season, levels = c("Summer", "Fall", "Winter", "Spring"))
m5$Site <- factor(m5$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
m5$CoreName <- factor(m5$CoreName, levels = c("LO", "HO", "LM", "MM", "HM", "Ref"))
m5$Habitat <- factor(m5$Habitat, levels = c("oyster", "marsh", "Ref"))
#Should only get rid of Summer 2015 rows
master <- na.omit(m5)
View(master)
#Reorder the columns
master <- master[c("Season", "Site", "Age", "CoreName", "Habitat",  "avg_N2Flux", "Perc_Inun", "avg_PercentOM", "avg_SOD", "avg_O2conc", "avg_flux_NOx", "avg_flux_NH3")]
#Rename the columns so they're less bulky
master <- plyr::rename(master, c("avg_N2Flux" = "N2flux", "Perc_Inun" = "Inund", "avg_PercentOM" = "SOM", "avg_SOD" = "SOD", "avg_O2conc" = "O2conc", "avg_flux_NOx" = "NOxflux", "avg_flux_NH3" = "NH3flux"))
write.csv(master, "combined-data\\clean\\annual-params_all-seasons_all-sites.csv", row.names = F)
#Use functions I wrote to add columns with Habitat & Season represented by #s
#Just in case rpart was tempted to do something weird with the characters
master <- season.numbers(master)
master <- habitat.numbers(master)
#Reorder the columns
master <- master[c("Season", "SeasonNumber", "Site", "Age", "CoreName", "Habitat", "HabitatNumber",  "avg_N2Flux", "Perc_Inun", "avg_PercentOM", "avg_SOD", "avg_O2conc", "avg_flux_NOx", "avg_flux_NH3")]
View(master)
str(master)
#Reorder the columns
master <- master[c("Season", "SeasonNumber", "Site", "Age", "CoreName", "Habitat", "HabitatNumber",  "N2Flux", "Inund", "SOM", "SOD", "O2conc", "NOxflux", "NH3flux")]
master <- master[c("Season", "SeasonNumber", "Site", "Age", "CoreName", "Habitat", "HabitatNumber",  "N2flux", "Inund", "SOM", "SOD", "O2conc", "NOxflux", "NH3flux")]
annual <- read.csv("combined-data\\clean\\all-params_all-seasons_all-sites.csv", header = T)
annual <- read.csv("combined-data\\clean\\annual-params_all-seasons_all-sites.csv", header = T)
DNF <- read.csv("N2-flux-by-type_all-seasons_all-sites.csv", header = T)
DNF <- read.csv("N2-flux\\clean\\N2-flux-by-type_all-seasons_all-sites.csv", header = T)
View(DNF)
str(DNF)
DNF <- read.csv("N2-flux\\clean\\N2-flux-by-type_all-seasons_all-sites.csv", header = T, stringsAsFactors = T)
str(DNF)
View(set.factors.basic)
DNF <- add.age(DNF)
DNF <- add.habitat(DNF)
set.factors(DNF)
DNF <- set.factors(DNF)
str(DNF)
DNF <- read.csv("N2-flux\\clean\\N2-flux-by-type_all-seasons_all-sites.csv", header = T, stringsAsFactors = T)
DNF <- set.factors(DNF)
str(DNF)
DNF <- add.age(DNF)
DNF$Age <- as.numeric(DNF$Age)
DNF <- add.habitat(DNF)
DNF$Habitat <- factor(DNF$Habitat, levels = c("oyster", "marsh", "Ref"))
str(DNF)
DNF <- read.csv("N2-flux\\clean\\N2-flux-by-type_all-seasons_all-sites.csv", header = T)
DNF <- set.factors(DNF)
DNF <- add.age(DNF)
DNF$Age <- as.numeric(DNF$Age)
DNF <- add.habitat(DNF)
DNF$Habitat <- factor(DNF$Habitat, levels = c("oyster", "marsh", "Ref"))
DNF <- read.csv("N2-flux\\clean\\N2-flux-by-type_all-seasons_all-sites.csv", header = T)
DNF <- add.age(DNF)
DNF <- read.csv("N2-flux\\clean\\N2-flux-by-type_all-seasons_all-sites.csv", header = T)
DNF <- set.factors.basic(DNF)
DNF <- na.omit(DNF)
DNF <- add.age(DNF)
DNF$Age <- as.numeric(DNF$Age)
DNF <- add.habitat(DNF)
DNF$Habitat <- factor(DNF$Habitat, levels = c("oyster", "marsh", "Ref"))
str(DNF)
p1 <- ggplot(DNF, aes(Age, avg_N2Flux, fill = "Season"))
p1 + geom_bar(stat = "identity", position = "dodge")
facet_grid(Site ~ .)
p1 + geom_bar(stat = "identity", position = "dodge") +
facet_grid(Site ~ .)
p1 <- ggplot(DNF, aes(Site, avg_N2Flux, fill = "Season"))
p1 + geom_bar(stat = "identity", position = "dodge") +
facet_grid(Habitat ~ .)
p1 <- ggplot(DNF, aes(Site, avg_N2Flux, fill = "Habitat"))
p1 + geom_bar(stat = "identity", position = "dodge")
p1 <- ggplot(DNF, aes(Site, avg_N2Flux, fill = Habitat))
p1 + geom_bar(stat = "identity", position = "dodge")
p1 <- ggplot(DNF, aes(Site, avg_N2Flux, fill = Habitat))
p1 + geom_bar(stat = "identity", position = "dodge") +
facet_grid(Season ~ .)
core.DNF <- read.csv("N2-flux\\clean\\N2-flux-by-core_with-summer15.csv", header = T)
View(core.DNF)
str(core.DNF)
core.DNF <- core.DNF[!core.DNF$Season == "Summer15", ]
View(core.DNF)
core.DNF <- core.DNF[!core.DNF$CoreName == "LoRef", ]
core.DNF <- core.DNF[!core.DNF$CoreName == "HiRef", ]
avg_DNF <- ddply(core.DNF, .(Site, Season, CoreName), summarise,
avg_DNF = mean(N2Flux),
sd_DNF = sd(N2Flux),
N = length(N2Flux),
se_DNF = sd_DNF / N)
View(avg_DNF)
avg_DNF <- ddply(core.DNF, .(Site, Season, Habitat), summarise,
avg_DNF = mean(N2Flux),
sd_DNF = sd(N2Flux),
N = length(N2Flux),
se_DNF = sd_DNF / N)
avg_DNF <- add.age(avg_DNF)
avg_DNF$Age <- as.numeric(avg_DNF$Age)
str(avg_DNF)
avg_DNF %>%
filter(Season == "Summer") %>%
ggplot(aes(Habitat, avg_DNF, fill = Site)) +
geom_bar(stat = "identity", position = "dodge") +
geom_errorbar(aes(ymax = avg_DNF + se_DNF, ymin = avg_DNF - se_DNF), width = 0.3,
position = position_dodge(0.9))
avg_DNF <- set.factors.basic(avg_DNF)
View(core.DNF)
levels(core.DNF) <- gsub("Ref", "sandflat", levels(core.DNF))
View(core.DNF)
levels(core.DNF)
levels(core.DNF)[levels(core.DNF == "Ref")]
core.DNF <- read.csv("N2-flux\\clean\\N2-flux-by-core_with-summer15.csv", header = T)
core.DNF <- core.DNF[!core.DNF$Season == "Summer15", ]
core.DNF <- core.DNF[!core.DNF$CoreName == "LoRef", ]
core.DNF <- core.DNF[!core.DNF$CoreName == "HiRef", ]
levels(core.DNF)[levels(core.DNF == "Ref")]
levels(core.DNF == "Ref")
core.DNF[core.DNF$Habitat == "Ref"]
core.DNF$Habitat == "Ref"
core.DNF$Habitat[core.DNF$Habitat == "Ref"] <- "sandflat"
[core.DNF$Habitat == "Ref"] <- "sandflat"
[core.DNF$Habitat == "Ref", ] <- "sandflat"
core.DNF$Habitat[core.DNF$Habitat == "Ref", ]
core.DNF$Habitat[core.DNF$Habitat == "Ref"]
core.DNF[core.DNF$Habitat == "Ref", ]
core.DNF <- read.csv("N2-flux\\clean\\N2-flux-by-core_with-summer15.csv", header = T)
core.DNF <- core.DNF[!core.DNF$Season == "Summer15", ]
core.DNF <- core.DNF[!core.DNF$CoreName == "LoRef", ]
core.DNF <- core.DNF[!core.DNF$CoreName == "HiRef", ]
core.DNF[core.DNF$Habitat == "Ref", ]
core.DNF[core.DNF$Habitat == "Ref", ] <- "sandflat"
core.DNF <- read.csv("N2-flux\\clean\\N2-flux-by-core_with-summer15.csv", header = T)
#Eliminate Summer 2015 and Lo/Hi Ref data
core.DNF <- core.DNF[!core.DNF$Season == "Summer15", ]
core.DNF <- core.DNF[!core.DNF$CoreName == "LoRef", ]
core.DNF <- core.DNF[!core.DNF$CoreName == "HiRef", ]
core.DNF[, core.DNF$Habitat == "Ref"]
core.DNF[core.DNF$Habitat == "Ref", ]
which(core.DNF$Habitat == "BTO")
which(core.DNF$Habitat == "Ref")
revalue(core.DNF, c("Ref" = "sandflat"))
sub1 <- which(core.DNF$Habitat == "Ref")
which(core.DNF$Habitat == "Ref")
core.DNF[sub1] <- "sandflat"
View(avg_DNF)
core.DNF[sub1]
core.DNF$Habitat[sub1]
core.DNF$Habitat[sub1] <- "sandflat"
core.DNF <- read.csv("N2-flux\\clean\\N2-flux-by-core_with-summer15.csv", header = T)
View(core.DNF)
str(core.DNF)
core.DNF <- core.DNF[!core.DNF$Season == "Summer15", ]
core.DNF <- core.DNF[!core.DNF$CoreName == "LoRef", ]
core.DNF <- core.DNF[!core.DNF$CoreName == "HiRef", ]
core.DNF$Habitat <- factor(core.DNF$Habitat, levels = c("oyster", "marsh", "Ref", "sandflat"))
View(core.DNF)
sub1 <- which(core.DNF$Habitat == "Ref")
core.DNF$Habitat[sub1] <- "sandflat"
avg_DNF <- ddply(core.DNF, .(Site, Season, Age, Habitat), summarise,
avg_DNF = mean(N2Flux),
sd_DNF = sd(N2Flux),
N = length(N2Flux),
se_DNF = sd_DNF / N)
View(avg_DNF)
str(avg_DNF)
avg_DNF <- ddply(core.DNF, .(Site, Season, Habitat), summarise,
avg_DNF = mean(N2Flux),
sd_DNF = sd(N2Flux),
N = length(N2Flux),
se_DNF = sd_DNF / N)
avg_DNF <- add.age(avg_DNF)
avg_DNF$Age <- as.numeric(avg_DNF$Age)
avg_DNF$Season <- factor(avg_DNF$Season, levels = c("Summer", "Fall", "Winter", "Spring"))
avg_DNF$Site <- factor(avg_DNF$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
avg_DNF$Habitat <- factor(avg_DNF$Habitat, levels = c("oyster", "marsh", "sandflat"))
avg_DNF %>%
filter(Season == "Summer") %>%
ggplot(aes(Habitat, avg_DNF, fill = Site)) +
geom_bar(stat = "identity", position = "dodge") +
geom_errorbar(aes(ymax = avg_DNF + se_DNF, ymin = avg_DNF - se_DNF), width = 0.3,
position = position_dodge(0.9))
avg_DNF %>%
filter(Season == "Fall") %>%
ggplot(aes(Habitat, avg_DNF, fill = Site)) +
geom_bar(stat = "identity", position = "dodge") +
geom_errorbar(aes(ymax = avg_DNF + se_DNF, ymin = avg_DNF - se_DNF), width = 0.3,
position = position_dodge(0.9))
avg_DNF %>%
filter(Season == "Winter") %>%
ggplot(aes(Habitat, avg_DNF, fill = Site)) +
geom_bar(stat = "identity", position = "dodge") +
geom_errorbar(aes(ymax = avg_DNF + se_DNF, ymin = avg_DNF - se_DNF), width = 0.3,
position = position_dodge(0.9))
avg_DNF %>%
filter(Season == "Spring") %>%
ggplot(aes(Habitat, avg_DNF, fill = Site)) +
geom_bar(stat = "identity", position = "dodge") +
geom_errorbar(aes(ymax = avg_DNF + se_DNF, ymin = avg_DNF - se_DNF), width = 0.3,
position = position_dodge(0.9))# +
avg_DNF %>%
ggplot(aes(Habitat, avg_DNF, fill = Site)) +
geom_bar(stat = "identity", position = "dodge") +
geom_errorbar(aes(ymax = avg_DNF + se_DNF, ymin = avg_DNF - se_DNF), width = 0.3,
position = position_dodge(0.9)) +
facet_grid(Season ~ .)
avg_DNF %>%
ggplot(aes(Habitat, avg_DNF, fill = Age)) +
geom_bar(stat = "identity", position = "dodge") +
geom_errorbar(aes(ymax = avg_DNF + se_DNF, ymin = avg_DNF - se_DNF), width = 0.3,
position = position_dodge(0.9)) +
facet_grid(Season ~ .)
avg_DNF %>%
ggplot(aes(Habitat, avg_DNF, fill = Site)) +
geom_bar(stat = "identity", position = "dodge") +
geom_errorbar(aes(ymax = avg_DNF + se_DNF, ymin = avg_DNF - se_DNF), width = 0.3,
position = position_dodge(0.9)) +
facet_grid(Season ~ .)
avg_DNF %>%
ggplot(aes(Habitat, avg_DNF, fill = Season)) +
geom_bar(stat = "identity", position = "dodge") +
geom_errorbar(aes(ymax = avg_DNF + se_DNF, ymin = avg_DNF - se_DNF), width = 0.3,
position = position_dodge(0.9))
avg_DNF %>%
ggplot(aes(Habitat, avg_DNF, fill = Season)) +
geom_bar(stat = "identity", position = "dodge") +
geom_errorbar(aes(ymax = avg_DNF + se_DNF, ymin = avg_DNF - se_DNF), width = 0.3,
position = position_dodge(0.9)) +
facet_grid(Site ~ .)
avg_DNF %>%
ggplot(aes(Habitat, avg_DNF, fill = Season)) +
geom_bar(stat = "identity", position = "dodge") +
geom_errorbar(aes(ymax = avg_DNF + se_DNF, ymin = avg_DNF - se_DNF), width = 0.3,
position = position_dodge(0.9)) +
facet_grid(. ~ Site)
avg_DNF %>%
ggplot(aes(Habitat, avg_DNF, fill = Season)) +
geom_bar(stat = "identity", position = "dodge") +
geom_errorbar(aes(ymax = avg_DNF + se_DNF, ymin = avg_DNF - se_DNF), width = 0.3,
position = position_dodge(0.9)) +
facet_grid(Site ~ .)
