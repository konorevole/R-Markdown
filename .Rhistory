setwd("E:/R Markdown")
library("plyr")
library("dplyr")
library("car")
library("ggplot2")
library("ggpmisc")
library("lattice")
library("grid")
library("reshape2")
source("functions.R")
annual.data <- read.csv("PRIMER\\raw\\annual-data_all-seasons_all-sites.csv", header = T, stringsAsFactors = F)
all.avgs <- read.csv("PRIMER\\raw\\all-data_annual-avg_all-sites.csv", header = T, stringsAsFactors = F)
spring <- read.csv("PRIMER\\raw\\all-data_spring15_all-sites.csv", header = T, stringsAsFactors = F)
sed.data <- read.csv("PRIMER\\raw\\sed-data_spring15_all-sites.csv", header = T, stringsAsFactors = F)
all.avgs.nona <- na.omit(all.avgs)
all.avgs.nona$Site <- factor(all.avgs.nona$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
all.avgs.nona$CoreName <- factor(all.avgs.nona$CoreName, levels = c("LO", "HO", "MM"))
all.avgs.nona$Habitat <- factor(all.avgs.nona$Habitat, levels = c("oyster", "marsh"))
annual.data <- add.age(annual.data)
annual.data$Age <- as.numeric(annual.data$Age)
cor(annual.data[annual.data$Age, 5:11])
View(annual.data)
cor(annual.nona[ , 5:11])
pairs(annual.data[, 5:11], upper.panel = panel.cor)
cor(annual.data[ , 5:11])
pairs(annual.data[, 9:11])
pairs(annual.data[, 9:11], upper.panel = panel.cor)
str(annual.data)
View(all.avgs)
pairs(annual.data[, 5:11], upper.panel = panel.cor)
annual.data$Season <- factor(annual.data$Season, level = c("Summer", "Fall", "Winter", "Spring"))
pairs(annual.data[annual.data$Season == "Spring", 5:12], upper.panel = panel.cor)
pairs(annual.data[annual.data$Season == "Summer", 5:12], upper.panel = panel.cor)
View(spring)
View(sed.data)
pairs(sed.data[ , 4:9], upper.panel = panel.cor)
spring.nona <- na.omit(spring)
View(spring.nona)
pairs(spring.nona[ , 4:12], upper.panel = panel.cor)
sed.data.nona <- na.omit(sed.data)
View(sed.data.nona)
?left_join
all.sed <- inner_join(sed.data.nona, spring.nona)
View(all.sed)
View(annual.data)
View(all.avgs)
cbind(all.avgs$PercentOM, all.sed)
View(all.avgs.nona)
pairs(all.avgs.nona[ , 4:12], upper.panel = panel.cor)
pairs(annual.data[annual.data$Season == "Summer", 5:12], upper.panel = panel.cor)
pairs(annual.data[, 5:11], upper.panel = panel.cor)
View(annual.data)
pairs(annual.data[annual.data$Season == "Summer", 5:12], upper.panel = panel.cor)
pairs(annual.data[annual.data$Season == "Summer", 5:11], upper.panel = panel.cor)
pairs(annual.data[annual.data$Season == "Fall", 5:11], upper.panel = panel.cor)
pairs(annual.data[annual.data$Season == "Winter", 5:11], upper.panel = panel.cor)
pairs(annual.data[annual.data$Season == "Spring", 5:11], upper.panel = panel.cor)
pairs(all.avgs.nona[ , 4:12], upper.panel = panel.cor)
pairs(all.avgs.nona[ , 5:8], upper.panel = panel.cor)
pairs(annual.data[, 5:11], upper.panel = panel.cor)
pairs(annual.data[annual.data$Season == "Summer", 5:11], upper.panel = panel.cor)
pairs(annual.data[annual.data$Season == "Fall", 5:11], upper.panel = panel.cor)
pairs(annual.data[annual.data$Season == "Winter", 5:11], upper.panel = panel.cor)
pairs(annual.data[annual.data$Season == "Spring", 5:11], upper.panel = panel.cor)
setwd("E:/R Markdown")
library("plyr")
library("dplyr")
library("car")
library("ggplot2")
library("ggpmisc")
library("lattice")
library("grid")
library("reshape2")
source("functions.R")
annual.data <- read.csv("PRIMER\\raw\\annual-data_all-seasons_all-sites.csv", header = T, stringsAsFactors = F)
all.avgs <- read.csv("PRIMER\\raw\\all-data_annual-avg_all-sites.csv", header = T, stringsAsFactors = F)
spring <- read.csv("PRIMER\\raw\\all-data_spring15_all-sites.csv", header = T, stringsAsFactors = F)
sed.data <- read.csv("PRIMER\\raw\\sed-data_spring15_all-sites.csv", header = T, stringsAsFactors = F)
all.avgs.nona <- na.omit(all.avgs)
all.avgs.nona$Site <- factor(all.avgs.nona$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
all.avgs.nona$CoreName <- factor(all.avgs.nona$CoreName, levels = c("LO", "HO", "MM"))
all.avgs.nona$Habitat <- factor(all.avgs.nona$Habitat, levels = c("oyster", "marsh"))
sed.data$Site <- factor(sed.data$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
sed.data$CoreName <- factor(sed.data$CoreName, levels = c("LO", "HO", "LM", "MM", "HM", "Ref"))
sed.data$Habitat <- factor(sed.data$Habitat, levels = c("oyster", "marsh", "Ref"))
annual.data <- add.age(annual.data)
annual.data$Age <- as.numeric(annual.data$Age)
spring.nona <- na.omit(spring)
sed.data.nona <- na.omit(sed.data)
all.sed <- inner_join(sed.data.nona, spring.nona)
pairs(all.avgs.nona[ , 5:8], upper.panel = panel.cor)
setwd("E:/R Markdown")
library("plyr")
library("dplyr")
library("car")
library("ggplot2")
library("ggpmisc")
library("rpart")
source("functions.R")
install.packages("rpart")
inund <- read.csv("inundation-clean_all-sites_all-seasons.csv", header = T, stringsAsFactors = F)
inund <- read.csv("Inundation\\clean\\inundation-clean_all-sites_all-seasons.csv", header = T, stringsAsFactors = F)
str(inund)
inund <- read.csv("Inundation\\clean\\inundation-clean_all-sites_all-seasons.csv", header = T)
str(inund)
inund2 <- read.csv("Inundation\\clean\\inundation_all-sites_all-seasons.csv", header = T)
str(inund2)
library("plyr")
library("dplyr")
source("functions.R")
inund <- read.csv("E:\\R Markdown\\Inundation\\raw\\inundation-raw_all-sites_all-seasons.csv", header = T, stringsAsFactors = F)
inund <- add.age(inund)
inund$Age <- as.numeric(inund$Age)
inund <- add.habitat(inund)
inund$Season <- factor(inund$Season, levels = c("Summer", "Fall", "Winter", "Spring", "Summer15"))
inund$CoreName <- factor(inund$CoreName, levels = c("LO", "HO", "LM", "MM", "HM", "Ref"))
inund$Site <- factor(inund$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
inund$Habitat <- factor(inund$Habitat, levels = c("oyster", "marsh", "Ref"))
write.csv(inund, "E:\\R Markdown\\Inundation\\clean\\inundation-clean_all-sites_all-seasons.csv", row.names = F)
annual.inund <- ddply(inund, c("Site", "CoreName"), summarise,
avg_PercInun = mean(Perc_Inun))
write.csv(annual.inund, "E:\\R Markdown\\Inundation\\clean\\inundation-by-type_annual-avg_all-sites.csv", row.names = F)
str(inund)
library("plyr")
library("dplyr")
library("car")
library("ggplot2")
library("ggpmisc")
library("rpart")
source("functions.R")
inund <- read.csv("Inundation\\clean\\inundation-clean_all-sites_all-seasons.csv", header = T)
str(inund)
inund$Age <- as.numeric(inund$Age)
SOM <- read.csv("LOI\\clean\\LOI-by-type_all-seasons_all-sites.csv", header = T)
str(SOM)
SOD <- read.csv("SOD\\clean\\SOD-by-type_all-seasons_all-sites.csv", header = T)
str(SOD)
O2conc <- read.csv("O2-conc-by-type_all-seasons_all-sites.csv", header = T)
O2conc <- read.csv("O2-conc\\clean\\O2-conc-by-type_all-seasons_all-sites.csv", header = T)
str(O2conc)
nutflux <- read.csv("nutrient-flux\\clean\\nutrient-flux-by-type_all-seasons_all-sites.csv", header = T)
str(nutflux)
DNF <- read.csv("N2-flux\\clean\\N2-flux-by-type_all-seasons_all-sites.csv", header = T)
str(DNE)
str(DNF)
str(inun)
str(inund)
str(SOM)
m1 <- merge(inund, SOM, by = c("Site", "Season", "CoreName"))
View(m1)
str(m1)
str(SOD)
m2 <- merge(m1, SOD, by = c("Site", "Season", "CoreName"))
View(m2)
str(m2)
str(O2conc)
m3 <- merge(m2, O2conc, by = c("Site", "Season", "CoreName"))
View(m3)
View(m1)
View(inund)
View(SOM)
m4 <- merge(m3, nutflux, by = c("Site", "Season", "CoreName"))
View(m4)
m5 <- merge(m4, DNF, by = c("Site", "Season", "CoreName"))
View(m5)
m5$Site <- factor(m5$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
m5$CoreName <- factor(m5$CoreName, levels = c("LO", "HO", "LM", "MM", "HM"))
m5$Season <- factor(m5$Season, levels = c("Summer", "Fall", "Winter", "Spring"))
m5$Site <- factor(m5$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
m5$CoreName <- factor(m5$CoreName, levels = c("LO", "HO", "LM", "MM", "HM"))
View(m5)
m5 <- merge(m4, DNF, by = c("Site", "Season", "CoreName"))
m5$Season <- factor(m5$Season, levels = c("Summer", "Fall", "Winter", "Spring"))
m5$Site <- factor(m5$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
m5$CoreName <- factor(m5$CoreName, levels = c("LO", "HO", "LM", "MM", "HM", "Ref"))
View(m5)
m1 <- merge(inund, SOM, by = c("Site", "Season", "CoreName"), all.x = T)
View(m1)
View(inund)
m1 <- merge(inund, SOM, by = c("Site", "Season", "CoreName"), all.x = T, sort = T)
View(inund)
View(m1)
m1 <- merge(inund, SOM, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
View(m1)
m2 <- merge(m1, SOD, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m3 <- merge(m2, O2conc, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m4 <- merge(m3, nutflux, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m5 <- merge(m4, DNF, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
View(m3)
View(m4)
View(m5)
str(m5)
m5$Season <- factor(m5$Season, levels = c("Summer", "Fall", "Winter", "Spring"))
m5$Site <- factor(m5$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
m5$CoreName <- factor(m5$CoreName, levels = c("LO", "HO", "LM", "MM", "HM", "Ref"))
m5$Habitat <- factor(m5$Habitat, levels = c("oyster", "marsh", "Ref"))
str(m5)
View(m5)
master <- na.omit(m5)
View(master)
str(master)
master <- master[c("Season", "Site", "Age", "CoreName", "Habitat")]
View(master)
master <- na.omit(m5)
master <- master[c("Season", "Site", "Age", "CoreName", "Habitat", "Perc_Inun", "avg_PercentOM", "avg_SOD", "avg_O2conc", "avg_flux_NOx", "avg_flux_NH3", "avg_N2Flux")]
View(master)
master <- master[c("Season", "Site", "Age", "CoreName", "Habitat", "avg_N2Flux", "Perc_Inun", "avg_PercentOM", "avg_SOD", "avg_O2conc", "avg_flux_NOx", "avg_flux_NH3")]
str(master)
rename(master, c("avg_N2Flux" = "N2flux", "Perc_Inun" = "Inund", "avg_PercentOM" = "SOM", "avg_SOD" = "SOD", "avg_O2conc" = "O2conc", "avg_flux_NOx" = "NOxflux", "avg_flux_NH3" = "NH3flux"))
?rename
rename(master, c("avg_N2Flux" = "N2flux", "Perc_Inun" = "Inund", "avg_PercentOM" = "SOM", "avg_SOD" = "SOD", "avg_O2conc" = "O2conc", "avg_flux_NOx" = "NOxflux", "avg_flux_NH3" = "NH3flux"))
View(master)
rename(master, c("avg_N2Flux" = "N2flux"))
rename(master, c(N2flux = avg_N2Flux, Inund = Perc_Inun, SOM = avg_PercentOM, SOD = avg_SOD, O2conc = avg_O2conc, NOxflux = avg_flux_NOx, NH3flux = avg_flux_NH3))
plyr::rename(master, c("avg_N2Flux" = "N2flux", "Perc_Inun" = "Inund", "avg_PercentOM" = "SOM", "avg_SOD" = "SOD", "avg_O2conc" = "O2conc", "avg_flux_NOx" = "NOxflux", "avg_flux_NH3" = "NH3flux"))
master <- plyr::rename(master, c("avg_N2Flux" = "N2flux", "Perc_Inun" = "Inund", "avg_PercentOM" = "SOM", "avg_SOD" = "SOD", "avg_O2conc" = "O2conc", "avg_flux_NOx" = "NOxflux", "avg_flux_NH3" = "NH3flux"))
View(master)
?rpart
str(master)
fit <- rpart(N2flux ~ Age + Inund + SOM + SOD + O2conc + NOxflux + NH3flux, data = master, method = anova)
fit <- rpart(N2flux ~ Age + Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = anova, data = master)
fit <- rpart(data = master, N2flux ~ Age + Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = anova)
fit <- rpart(N2flux ~ Age + Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = anova, data = master)
install.packages("rpart")
install.packages("rpart")
install.packages("rpart")
library("rpart")
fit <- rpart(N2flux ~ Age + Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = anova, data = master)
inund <- read.csv("Inundation\\clean\\inundation-clean_all-sites_all-seasons.csv", header = T)
inund$Age <- as.numeric(inund$Age)
SOM <- read.csv("LOI\\clean\\LOI-by-type_all-seasons_all-sites.csv", header = T)
SOD <- read.csv("SOD\\clean\\SOD-by-type_all-seasons_all-sites.csv", header = T)
O2conc <- read.csv("O2-conc\\clean\\O2-conc-by-type_all-seasons_all-sites.csv", header = T)
nutflux <- read.csv("nutrient-flux\\clean\\nutrient-flux-by-type_all-seasons_all-sites.csv", header = T)
DNF <- read.csv("N2-flux\\clean\\N2-flux-by-type_all-seasons_all-sites.csv", header = T)
#Sequential merges to combine all relevant data frames into a master data frame
#Includes all cores and seasons (including Summer 2015) initially- easier to double-check
#sort = F maintains original ordering scheme
m1 <- merge(inund, SOM, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m2 <- merge(m1, SOD, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m3 <- merge(m2, O2conc, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m4 <- merge(m3, nutflux, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
m5 <- merge(m4, DNF, by = c("Site", "Season", "CoreName"), all.x = T, sort = F)
#Ensuring that preferred order is preserved
#This will turn Summer 2015 values to NA for easy elimination
m5$Season <- factor(m5$Season, levels = c("Summer", "Fall", "Winter", "Spring"))
m5$Site <- factor(m5$Site, levels = c("IMS", "Carrot", "NOAA", "Army"))
m5$CoreName <- factor(m5$CoreName, levels = c("LO", "HO", "LM", "MM", "HM", "Ref"))
m5$Habitat <- factor(m5$Habitat, levels = c("oyster", "marsh", "Ref"))
master <- na.omit(m5)
master <- master[c("Season", "Site", "Age", "CoreName", "Habitat", "avg_N2Flux", "Perc_Inun", "avg_PercentOM", "avg_SOD", "avg_O2conc", "avg_flux_NOx", "avg_flux_NH3")]
master <- plyr::rename(master, c("avg_N2Flux" = "N2flux", "Perc_Inun" = "Inund", "avg_PercentOM" = "SOM", "avg_SOD" = "SOD", "avg_O2conc" = "O2conc", "avg_flux_NOx" = "NOxflux", "avg_flux_NH3" = "NH3flux"))
fit <- rpart(N2flux ~ Age + Inund + SOM + SOD + O2conc + NOxflux + NH3flux, method = anova, data = master)
